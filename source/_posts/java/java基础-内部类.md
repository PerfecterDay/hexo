---
title: java基础-内部类
date: 2019-08-18  09:27:12
tags: java
category: java
---

### 内部类的好处
+ 内部类提供了更好的封装，可以把内部类隐藏在外部类中，不允许同一个包中的其他类访问内部类。
+ 内部类可以直接访问外部类的私有数据。
+ 匿名内部类适用于创建那些只需要一次使用的类。

### 内部类的分类
内部类主要可以分为以下几类：
1. 成员内部类：非静态内部类、静态内部类 
2. 非成员内部类：局部内部类、匿名内部类

#### 非静态内部类
没有使用 static 修饰的、作为外部类成员的内部类称为非静态内部类。非静态内部类的内存示意图：
![内部类的内存情况](/pics/inner-class.jpg)
1. 非静态内部类里可以直接访问外部类的 private 成员，因为在非静态内部类对象中保存了它所寄生的外部类对象的引用。（非静态内部类对象必须寄生在外部类对象中）
2. 当非静态内部类对象存在时，则一定存在外部类对象；反之不然。
3. 因为第二条，所以非静态内部类可以访问外部类的私有成员；但是外部类不能直接访问内部类的成员，有可能内部类对象还不存在。
4. 非静态内部类与外部类成员变量相同时，内部类变量会覆盖外部类变量。此时，若想访问外部类变量，要使用：OuterClass.this.fieldName 语法。
5. 不能在外部类的静态方法中访问非静态内部类。
6. 非静态内部类里不能有静态方法、静态成员变量、静态初始化块。

#### 静态内部类
使用 static 修饰的内部类称为静态内部类，这个内部类属于外部类本身而不是属于外部类的某个对象。
1. 静态内部类可以包含静态成员，也可以包含非静态成员。
2. 静态内部类作为外部类的静态成员，不能访问外部类的非静态成员，只能访问外部类的静态成员。
3. 静态内部类对象不是寄生在外部类对象中，而是寄生在外部类本身，支持有外部类的引用。因此，静态内部类对象存在时，外部类对象不一定存在，所以静态内部类不能访问外部类的非静态成员。
4. 外部类不能直接访问静态内部类的非静态成员，但是可以动过内部类的类名来访问静态内部类的成员。

#### 使用内部类
1. 在外部类内部使用

    在外部类内部使用内部类时，和使用普通类没什么区别，唯一的区别在于：
    不能在外部类的静态成员中(静态成员方法、静态初始化块)使用非静态内部类。
2. 在外部类以外使用非静态内部类

    声明一个内部类变量：`OuterClass.InnerClass varName`
    实例化一个非静态内部类对象，必须现有外部类对象实例： `OuterInstance.new InnerClassConstructor()`

3. 在外部类以外使用静态内部类
    `new OuterClass.InnerConstructor()`

#### 局部内部类
在方法内部定义的类，就是一个局部内部类。

#### 匿名内部类

